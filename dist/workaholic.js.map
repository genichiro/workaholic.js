{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","workaholic.js","node_modules/blob/index.js","src/channel.es6","src/function-util.es6","src/request.es6","src/workaholic.es6","src/worker-thread.es6"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","global","mapArrayBufferViews","ary","chunk","buffer","ArrayBuffer","buf","byteLength","copy","Uint8Array","set","byteOffset","BlobBuilderConstructor","options","bb","BlobBuilder","append","getBlob","type","BlobConstructor","Blob","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","size","blobSupportsArrayBufferView","b","blobBuilderSupported","prototype","undefined","this","self","window",2,"_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","WorkerThread","Request","FunctionUtil","Channel","requestQueue","workerQueue","push","build","value","request","workerThread","shift","execute","argName","arg","typeTable","string","object","jsonString","JSON","stringify","other","arguments","name","message","fn","fnString","toString","args","Array","slice","pop","fnArgNames","getArgumentNames","_createArgumentInjectionString","_putRequest","promise","./function-util.es6","./request.es6","./worker-thread.es6",3,"createObjectURL","createBlobURL","_URL","URL","webkitURL","exec","str","source","replace","names","match","split","blob",4,"PromiseState","PENDING","RESOLVED","RequestPromise","state","result","deferred","done","onResolved","functionString",5,"Workaholic","./channel.es6",6,"workerfunc","finish","postMessage","onmessage","eval","data","WORKER_BLOB","toBlob","channel","worker","Worker","_this","resolve","takeRequest"],"mappings":"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","file":"workaholic.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",null,"/**\n * Create a blob builder even when vendor prefixes exist\n */\n\nvar BlobBuilder = global.BlobBuilder\n  || global.WebKitBlobBuilder\n  || global.MSBlobBuilder\n  || global.MozBlobBuilder;\n\n/**\n * Check if Blob constructor is supported\n */\n\nvar blobSupported = (function() {\n  try {\n    var a = new Blob(['hi']);\n    return a.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if Blob constructor supports ArrayBufferViews\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\n */\n\nvar blobSupportsArrayBufferView = blobSupported && (function() {\n  try {\n    var b = new Blob([new Uint8Array([1,2])]);\n    return b.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if BlobBuilder is supported\n */\n\nvar blobBuilderSupported = BlobBuilder\n  && BlobBuilder.prototype.append\n  && BlobBuilder.prototype.getBlob;\n\n/**\n * Helper function that maps ArrayBufferViews to ArrayBuffers\n * Used by BlobBuilder constructor and old browsers that didn't\n * support it in the Blob constructor.\n */\n\nfunction mapArrayBufferViews(ary) {\n  for (var i = 0; i < ary.length; i++) {\n    var chunk = ary[i];\n    if (chunk.buffer instanceof ArrayBuffer) {\n      var buf = chunk.buffer;\n\n      // if this is a subarray, make a copy so we only\n      // include the subarray region from the underlying buffer\n      if (chunk.byteLength !== buf.byteLength) {\n        var copy = new Uint8Array(chunk.byteLength);\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\n        buf = copy.buffer;\n      }\n\n      ary[i] = buf;\n    }\n  }\n}\n\nfunction BlobBuilderConstructor(ary, options) {\n  options = options || {};\n\n  var bb = new BlobBuilder();\n  mapArrayBufferViews(ary);\n\n  for (var i = 0; i < ary.length; i++) {\n    bb.append(ary[i]);\n  }\n\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\n};\n\nfunction BlobConstructor(ary, options) {\n  mapArrayBufferViews(ary);\n  return new Blob(ary, options || {});\n};\n\nmodule.exports = (function() {\n  if (blobSupported) {\n    return blobSupportsArrayBufferView ? global.Blob : BlobConstructor;\n  } else if (blobBuilderSupported) {\n    return BlobBuilderConstructor;\n  } else {\n    return undefined;\n  }\n})();\n","module.exports = (function() {\n    let WorkerThread = require('./worker-thread.es6');\n    let Request = require('./request.es6');\n    let FunctionUtil = require('./function-util.es6');\n\n    class Channel {\n        constructor(size) {\n            this.requestQueue = [];\n            this.workerQueue = [];\n\n            // create worker threads\n            for (let i = 0; i < size; i = (i + 1) | 0) {\n                this.workerQueue.push(WorkerThread.build(this));\n            }\n        }\n\n        _putRequest(request) {\n            if (this.workerQueue.length > 0) {\n                let workerThread = this.workerQueue.shift();\n                workerThread.execute(request);\n            } else {\n                this.requestQueue.push(request);\n            }\n        }\n\n        takeRequest(workerThread) {\n            if (this.requestQueue.length > 0) {\n                let request = this.requestQueue.shift();\n                workerThread.execute(request);\n            } else {\n                this.workerQueue.push(workerThread);\n            }\n        }\n\n        _createArgumentInjectionString(argName, arg) {\n            const typeTable = {\n                string: () => {\n                    return `var ${argName}=\\'${arg}\\';`;\n                },\n                object: () => {\n                    let jsonString = JSON.stringify(arg);\n                    return `var ${argName}=${jsonString};`;\n                },\n                other: () => {\n                    return `var ${argName}=${arg};`;\n                }\n            };\n            return (typeTable[typeof arg] || typeTable.other)();\n        }\n\n        execute() {\n            if (arguments.length === 0 || typeof arguments[arguments.length - 1] !== 'function') {\n                throw new Error({\n                    name: 'run \"execute\" error',\n                    message: 'last argument is not \"function\"'\n                });\n            }\n            let fn = arguments[arguments.length - 1];\n            let fnString = FunctionUtil.toString(fn);\n            if (arguments.length >= 2) {\n                // inject arguments into worker\n                var args = Array.prototype.slice.call(arguments);\n                args.pop();\n\n                let fnArgNames = FunctionUtil.getArgumentNames(fn);\n                for (let i = 0; i < args.length && i < fnArgNames.length; i = (i + 1) | 0) {\n                    fnString = this._createArgumentInjectionString(fnArgNames[i], args[i]) + fnString;\n                }\n            }\n            let request = Request.build(fnString);\n            this._putRequest(request);\n            return request.promise;\n        }\n    }\n    return Channel;\n})();\n","module.exports = (function(global) {\n    let Blob = require('blob');\n    let createObjectURL = global.createObjectURL || global.createBlobURL;\n    if (!createObjectURL) {\n        let URL = global.URL || global.webkitURL;\n        if (URL) {\n            createObjectURL = URL.createObjectURL;\n        } else {\n            throw new Error({\n                name: 'create Blob error',\n                message: 'Blob creation implementation was not found'\n            });\n        }\n    }\n\n    class FunctionUtil {\n        static toString(fn) {\n            return /^function\\s*\\w*\\s*\\([\\w\\s,]*\\)\\s*{([\\w\\W]*?)}$/.exec(fn.toString())[1];\n        }\n\n        static toBlob(fn) {\n            let str = FunctionUtil.toString(fn);\n            return createObjectURL(new Blob([str], {type: 'text/javascript'}));\n        }\n\n        static getArgumentNames(fn) {\n            var source = fn.toString().replace(/\\/\\/.*$|\\/\\*[\\s\\S]*?\\*\\/|\\s/gm, ''); // strip comments\n            var names = source.match(/\\((.*?)\\)/)[1].split(',');\n            return (names.length === 1 && names[0] === '') ? [] : names;\n        }\n    }\n    return FunctionUtil;\n})((this || 0).self || global);\n","module.exports = (function() {\n    const PromiseState = {\n        PENDING: 'pending',\n        RESOLVED: 'state'\n    };\n\n    class RequestPromise {\n        constructor() {\n            this.state = PromiseState.PENDING;\n        }\n\n        resolve(result) {\n            this.result = result;\n            this.state = PromiseState.RESOLVED;\n\n            if (this.deferred) {\n                this.done(this.deferred);\n                this.deferred = null;\n            }\n        }\n\n        done(onResolved) {\n            if (this.state === PromiseState.PENDING) {\n                this.deferred = onResolved;\n                return;\n            }\n            onResolved(this.result);\n        }\n\n        static build() {\n            return new RequestPromise();\n        }\n    }\n\n    class Request {\n        constructor(functionString) {\n            this.functionString = functionString;\n            this.promise = RequestPromise.build();\n        }\n\n        static build(fnString) {\n            return new Request(fnString);\n        }\n    }\n    return Request;\n})();\n","(function(global) {\n    let Channel = require('./channel.es6');\n\n    class Workaholic {\n        create(size) {\n            return new Channel(size);\n        }\n    }\n\n    // exports\n    if ('process' in global) {\n        module.exports = Workaholic;\n    }\n    global.Workaholic = new Workaholic();\n})((this || 0).self || global);\n","module.exports = (function() {\n    let FunctionUtil = require('./function-util.es6');\n\n    const workerfunc = () => {\n        /* eslint-disable */\n        let finish = result => {\n            self.postMessage(result);\n        };\n        /* eslint-disable */\n        self.onmessage = e => {\n            eval(e.data);\n        };\n    };\n    const WORKER_BLOB = FunctionUtil.toBlob(workerfunc);\n\n    class WorkerThread {\n        constructor(channel) {\n            this.channel = channel;\n            this.worker = new Worker(WORKER_BLOB);\n        }\n\n        execute(request) {\n            this.request = request;\n            this.worker.postMessage(request.functionString);\n            this.worker.onmessage = e => {\n                if (!this.request) return;\n\n                this.request.promise.resolve(e.data);\n                this.request = null;\n                this.channel.takeRequest(this);\n            };\n        }\n\n        static build(channel) {\n            return new WorkerThread(channel);\n        }\n    }\n    return WorkerThread;\n})();\n"],"sourceRoot":"/source/"}