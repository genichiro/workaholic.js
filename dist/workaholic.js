!function e(n,t,r){function u(i,a){if(!t[i]){if(!n[i]){var s="function"==typeof require&&require;if(!a&&s)return s(i,!0);if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var f=t[i]={exports:{}};n[i][0].call(f.exports,function(e){var t=n[i][1][e];return u(t?t:e)},f,f.exports,e,n,t,r)}return t[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)u(r[i]);return u}({1:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();n.exports=function(){var n=e("./worker-thread.es6"),t=e("./request.es6"),o=e("./function-util.es6"),i=function(){function e(t){r(this,e),this.requestQueue=[],this.workerQueue=[];for(var u=0;t>u;u=u+1|0)this.workerQueue.push(n.build(this))}return u(e,[{key:"_putRequest",value:function(e){if(this.workerQueue.length>0){var n=this.workerQueue.shift();n.execute(e)}else this.requestQueue.push(e)}},{key:"takeRequest",value:function(e){if(this.requestQueue.length>0){var n=this.requestQueue.shift();e.execute(n)}else this.workerQueue.push(e)}},{key:"_createArgumentInjectionString",value:function(e,n){var t={string:function(){return"var "+e+"='"+n+"';"},object:function(){var t=JSON.stringify(n);return"var "+e+"="+t+";"},other:function(){return"var "+e+"="+n+";"}};return(t[typeof n]||t.other)()}},{key:"execute",value:function(){if(0===arguments.length||"function"!=typeof arguments[arguments.length-1])throw new Error({name:'run "execute" error',message:'last argument is not "function"'});var e=arguments[arguments.length-1],n=o.toString(e);if(arguments.length>=2){var r=Array.prototype.slice.call(arguments);r.pop();for(var u=o.getArgumentNames(e),i=0;i<r.length&&i<u.length;i=i+1|0)n=this._createArgumentInjectionString(u[i],r[i])+n}var a=t.build(n);return this._putRequest(a),a.promise}}]),e}();return i}()},{"./function-util.es6":2,"./request.es6":3,"./worker-thread.es6":5}],2:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();n.exports=function(){var e=window.createObjectURL||window.createObjectURL;if(!e){var n=window.URL||window.webkitURL;if(!n)throw new Error({name:"create Blob error",message:"Blob creation implementation was not found"});e=n.createObjectURL}var t=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,o=function(){function n(){r(this,n)}return u(n,null,[{key:"toString",value:function(e){return/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/.exec(e.toString())[1]}},{key:"toBlob",value:function(r){var u=n.toString(r);if("function"==typeof window.Blob)return e(new window.Blob([u],{type:"text/javascript"}));if("function"==typeof t){var o=new t;return o.append(u),e(o.getBlob())}return"data:text/javascript;charset=utf-8,"+encodeURI(u)}},{key:"getArgumentNames",value:function(e){var n=e.toString().replace(/\/\/.*$|\/\*[\s\S]*?\*\/|\s/gm,""),t=n.match(/\((.*?)\)/)[1].split(",");return 1===t.length&&""===t[0]?[]:t}}]),n}();return o}()},{}],3:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();n.exports=function(){var e={PENDING:"pending",RESOLVED:"state"},n=function(){function n(){r(this,n),this.state=e.PENDING}return u(n,[{key:"resolve",value:function(n){this.result=n,this.state=e.RESOLVED,this.deferred&&(this.done(this.deferred),this.deferred=null)}},{key:"done",value:function(n){return this.state===e.PENDING?void(this.deferred=n):void n(this.result)}}],[{key:"build",value:function(){return new n}}]),n}(),t=function(){function e(t){r(this,e),this.functionString=t,this.promise=n.build()}return u(e,null,[{key:"build",value:function(n){return new e(n)}}]),e}();return t}()},{}],4:[function(e,n,t){(function(t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();!function(t){var o=e("./channel.es6"),i=function(){function e(){r(this,e)}return u(e,[{key:"create",value:function(e){return new o(e)}}]),e}();"process"in t&&(n.exports=i),t.Workaholic=new i}(0..self||t)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./channel.es6":1}],5:[function(require,module,exports){"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();module.exports=function(){var FunctionUtil=require("./function-util.es6"),workerfunc=function workerfunc(){var finish=function(e){self.postMessage(e)};self.onmessage=function(e){eval(e.data)}},WORKER_BLOB=FunctionUtil.toBlob(workerfunc),WorkerThread=function(){function e(n){_classCallCheck(this,e),this.channel=n,this.worker=new Worker(WORKER_BLOB)}return _createClass(e,[{key:"execute",value:function(e){var n=this;this.request=e,this.worker.postMessage(e.functionString),this.worker.onmessage=function(e){n.request&&(n.request.promise.resolve(e.data),n.request=null,n.channel.takeRequest(n))}}}],[{key:"build",value:function(n){return new e(n)}}]),e}();return WorkerThread}()},{"./function-util.es6":2}]},{},[4]);
//# sourceMappingURL=workaholic.js.map