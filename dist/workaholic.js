!function e(t,n,r){function u(o,a){if(!n[o]){if(!t[o]){var s="function"==typeof require&&require;if(!a&&s)return s(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return u(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)u(r[o]);return u}({1:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.exports=function(){var t=e("./worker-thread.es6"),n=e("./request.es6"),i=e("./function-util.es6"),o=function(){function e(n){r(this,e),this.requestQueue=[],this.workerQueue=[];for(var u=0;n>u;u=u+1|0)this.workerQueue.push(t.build(this))}return u(e,[{key:"_putRequest",value:function(e){if(this.workerQueue.length>0){var t=this.workerQueue.shift();t.execute(e)}else this.requestQueue.push(e)}},{key:"takeRequest",value:function(e){if(this.requestQueue.length>0){var t=this.requestQueue.shift();e.execute(t)}else this.workerQueue.push(e)}},{key:"_createArgumentInjectionString",value:function(e,t){var n={string:function(){return"var "+e+"='"+t+"';"},object:function(){var n=JSON.stringify(t);return"var "+e+"="+n+";"},other:function(){return"var "+e+"="+t+";"}};return(n[typeof t]||n.other)()}},{key:"execute",value:function(){if(0===arguments.length||"function"!=typeof arguments[arguments.length-1])throw{name:'run "execute" error',message:'last argument is not "function"'};var e=arguments[arguments.length-1],t=i.toString(e);if(arguments.length>=2){var r=Array.prototype.slice.call(arguments);r.pop();for(var u=i.getArgumentNames(e),o=0;o<r.length&&o<u.length;o=o+1|0)t=this._createArgumentInjectionString(u[o],r[o])+t}var a=n.build(t);return this._putRequest(a),a.promise}}]),e}();return o}()},{"./function-util.es6":2,"./request.es6":3,"./worker-thread.es6":5}],2:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.exports=function(){var e=function(){function e(){r(this,e)}return u(e,null,[{key:"toString",value:function(e){return/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/.exec(e.toString())[1]}},{key:"toBlob",value:function(t){var n=e.toString(t);return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))}},{key:"getArgumentNames",value:function(e){var t=e.toString().replace(/\/\/.*$|\/\*[\s\S]*?\*\/|\s/gm,""),n=t.match(/\((.*?)\)/)[1].split(",");return 1===n.length&&""===n[0]?[]:n}}]),e}();return e}()},{}],3:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.exports=function(){var e={PENDING:"pending",RESOLVED:"state"},t=function(){function t(){r(this,t),this.state=e.PENDING}return u(t,[{key:"resolve",value:function(t){this.result=t,this.state=e.RESOLVED,this.deferred&&(this.done(this.deferred),this.deferred=null)}},{key:"done",value:function(t){return this.state===e.PENDING?void(this.deferred=t):void t(this.result)}}],[{key:"build",value:function(){return new t}}]),t}(),n=function(){function e(n){r(this,e),this.functionString=n,this.promise=t.build()}return u(e,null,[{key:"build",value:function(t){return new e(t)}}]),e}();return n}()},{}],4:[function(e,t,n){(function(n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(n){var i=e("./channel.es6"),o=function(){function e(){r(this,e)}return u(e,[{key:"create",value:function(e){return new i(e)}}]),e}();"process"in n&&(t.exports=o),n.Workaholic=new o}(0..self||n)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./channel.es6":1}],5:[function(require,module,exports){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();module.exports=function(){var FunctionUtil=require("./function-util.es6"),workerfunc=function workerfunc(){var finish=function(e){self.postMessage(e)};self.onmessage=function(e){eval(e.data)}},WORKER_BLOB=FunctionUtil.toBlob(workerfunc),WorkerThread=function(){function e(t){_classCallCheck(this,e),this.channel=t,this.worker=new Worker(WORKER_BLOB)}return _createClass(e,[{key:"execute",value:function(e){var t=this;this.request=e,this.worker.postMessage(e.functionString),this.worker.onmessage=function(e){t.request&&(t.request.promise.resolve(e.data),t.request=null,t.channel.takeRequest(t))}}}],[{key:"build",value:function(t){return new e(t)}}]),e}();return WorkerThread}()},{"./function-util.es6":2}]},{},[4]);
//# sourceMappingURL=workaholic.js.map