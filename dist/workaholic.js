!function e(n,t,r){function u(i,a){if(!t[i]){if(!n[i]){var f="function"==typeof require&&require;if(!a&&f)return f(i,!0);if(o)return o(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var c=t[i]={exports:{}};n[i][0].call(c.exports,function(e){var t=n[i][1][e];return u(t?t:e)},c,c.exports,e,n,t,r)}return t[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)u(r[i]);return u}({1:[function(e,n,t){(function(e){function t(e){for(var n=0;n<e.length;n++){var t=e[n];if(t.buffer instanceof ArrayBuffer){var r=t.buffer;if(t.byteLength!==r.byteLength){var u=new Uint8Array(t.byteLength);u.set(new Uint8Array(r,t.byteOffset,t.byteLength)),r=u.buffer}e[n]=r}}}function r(e,n){n=n||{};var r=new o;t(e);for(var u=0;u<e.length;u++)r.append(e[u]);return n.type?r.getBlob(n.type):r.getBlob()}function u(e,n){return t(e),new Blob(e,n||{})}var o=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,i=function(){try{var e=new Blob(["hi"]);return 2===e.size}catch(n){return!1}}(),a=i&&function(){try{var e=new Blob([new Uint8Array([1,2])]);return 2===e.size}catch(n){return!1}}(),f=o&&o.prototype.append&&o.prototype.getBlob;n.exports=function(){return i?a?e.Blob:u:f?r:void 0}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();n.exports=function(){var n=e("./worker-thread.es6"),t=e("./request.es6"),o=e("./function-util.es6"),i=function(){function e(t){r(this,e),this.requestQueue=[],this.workerQueue=[];for(var u=0;t>u;u=u+1|0)this.workerQueue.push(n.build(this))}return u(e,[{key:"_putRequest",value:function(e){if(this.workerQueue.length>0){var n=this.workerQueue.shift();n.execute(e)}else this.requestQueue.push(e)}},{key:"takeRequest",value:function(e){if(this.requestQueue.length>0){var n=this.requestQueue.shift();e.execute(n)}else this.workerQueue.push(e)}},{key:"_createArgumentInjectionString",value:function(e,n){var t={string:function(){return"var "+e+"='"+n+"';"},object:function(){var t=JSON.stringify(n);return"var "+e+"="+t+";"},other:function(){return"var "+e+"="+n+";"}};return(t[typeof n]||t.other)()}},{key:"execute",value:function(){if(0===arguments.length||"function"!=typeof arguments[arguments.length-1])throw new Error({name:'run "execute" error',message:'last argument is not "function"'});var e=arguments[arguments.length-1],n=o.toString(e);if(arguments.length>=2){var r=Array.prototype.slice.call(arguments);r.pop();for(var u=o.getArgumentNames(e),i=0;i<r.length&&i<u.length;i=i+1|0)n=this._createArgumentInjectionString(u[i],r[i])+n}var a=t.build(n);return this._putRequest(a),a.promise}}]),e}();return i}()},{"./function-util.es6":3,"./request.es6":4,"./worker-thread.es6":6}],3:[function(e,n,t){(function(t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();n.exports=function(n){var t=e("blob"),o=n.createObjectURL||n.createBlobURL;if(!o){var i=n.URL||n.webkitURL;if(!i)throw new Error({name:"create Blob error",message:"Blob creation implementation was not found"});o=i.createObjectURL}var a=function(){function e(){r(this,e)}return u(e,null,[{key:"toString",value:function(e){return/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/.exec(e.toString())[1]}},{key:"toBlob",value:function(n){var r=e.toString(n);return o(new t([r],{type:"text/javascript"}))}},{key:"getArgumentNames",value:function(e){var n=e.toString().replace(/\/\/.*$|\/\*[\s\S]*?\*\/|\s/gm,""),t=n.match(/\((.*?)\)/)[1].split(",");return 1===t.length&&""===t[0]?[]:t}}]),e}();return a}(0..self||t)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{blob:1}],4:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();n.exports=function(){var e={PENDING:"pending",RESOLVED:"state"},n=function(){function n(){r(this,n),this.state=e.PENDING}return u(n,[{key:"resolve",value:function(n){this.result=n,this.state=e.RESOLVED,this.deferred&&(this.done(this.deferred),this.deferred=null)}},{key:"done",value:function(n){return this.state===e.PENDING?void(this.deferred=n):void n(this.result)}}],[{key:"build",value:function(){return new n}}]),n}(),t=function(){function e(t){r(this,e),this.functionString=t,this.promise=n.build()}return u(e,null,[{key:"build",value:function(n){return new e(n)}}]),e}();return t}()},{}],5:[function(e,n,t){(function(t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();!function(t){var o=e("./channel.es6"),i=function(){function e(){r(this,e)}return u(e,[{key:"create",value:function(e){return new o(e)}}]),e}();"process"in t&&(n.exports=i),t.Workaholic=new i}(0..self||t)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./channel.es6":2}],6:[function(require,module,exports){"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();module.exports=function(){var FunctionUtil=require("./function-util.es6"),workerfunc=function workerfunc(){var finish=function(e){self.postMessage(e)};self.onmessage=function(e){eval(e.data)}},WORKER_BLOB=FunctionUtil.toBlob(workerfunc),WorkerThread=function(){function e(n){_classCallCheck(this,e),this.channel=n,this.worker=new Worker(WORKER_BLOB)}return _createClass(e,[{key:"execute",value:function(e){var n=this;this.request=e,this.worker.postMessage(e.functionString),this.worker.onmessage=function(e){n.request&&(n.request.promise.resolve(e.data),n.request=null,n.channel.takeRequest(n))}}}],[{key:"build",value:function(n){return new e(n)}}]),e}();return WorkerThread}()},{"./function-util.es6":3}]},{},[5]);
//# sourceMappingURL=workaholic.js.map